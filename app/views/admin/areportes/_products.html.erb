  <%= stylesheet_link_tag 'areport.css' %>
<%= javascript_include_tag 'http://www.flotcharts.org/flot/jquery.flot.js' %>
<%= javascript_include_tag 'http://www.flotcharts.org/flot/jquery.flot.time.js' %>
<%# javascript_include_tag 'https://raw.github.com/RuiPereira/flot/axislabels/jquery.flot.axislabels.js',
							'http://www.benjaminbuffet.com/public/js/jquery.flot.orderBars.js'

 %>
 <%= javascript_include_tag '1.js' %>
  <%= stylesheet_link_tag 'file.css' %>


	<%
inventories = Inventory.all
    arrContracts = Array.new


# inventories.each do |inventory| 	
	# id_pro = Inventory.group(:product_id).count
	id_pro = Inventory.where('product_id > 0').group(:product_id).count
	# id_pro.each_key { |key| puts key }
	# id_pro.each_key { |key| 
	id_pro.each {|key, value|  

    	contract_hash = Hash.new

		@product = Product.find(key.to_i)

        contract_hash["id"] = @product.id
        contract_hash["name"] = @product.name
        contract_hash["amount"] = value

        arrContracts.push(contract_hash)

	}


	puts "****to_json***********"+arrContracts.to_s
	puts "****to_normal***********"+arrContracts.to_json.to_s
	puts "****************"+arrContracts[0]['name'].to_s

	 %>
<input type="text" id="products_json" value="<%= arrContracts.to_json %>" style="width:100%;"/>
<h1><%= "Cslas deproductos"+@c.to_s %></h1>
<h1>Render Products</h1>
<script type="text/javascript">
// alert();

console.log($('#products_json').val())

var object_json = JSON.parse($('#products_json').val());
    
    // object_json.each 
var d1 = [];
var ticks = [];

$.each(object_json, function(idx, obj) {
    // alert(obj.tagName);
   var d = [idx, obj.amount] 
   var dname = [idx, obj.name] 
   d1.push(d);
   ticks.push(dname);
});
console.log(d1);
// JSON.stringify(d1)

// var d1 = [[0, 3], [1, 3], [2, 5], [3, 7], [4, 8], [5, 10], [6, 11], [7, 9], [8, 5], [9, 13]];
// var d1 = [[0, 3], [1, 3], [2, 5], [3, 7], [4, 8], [5, 10]];
// var dataset = [{ label: "2012 Average Temperature", data: d1, color: "#5482FF" }];
var dataset = [{ label: "2014 Productos mas Vendidos", data: d1, color: "#5482FF" }];
// var ticks = [[0, "London"], [1, "New York"], [2, "New Delhi"], [3, "Taipei"],[4, "Beijing"], [5, "Sydney"]];
 

var options = {
    series: {
        bars: {
            show: true
        }
    },
    bars: {
        align: "center",
        barWidth: 0.5
    },
    xaxis: {
        axisLabel: "World Cities",
        axisLabelUseCanvas: true,
        axisLabelFontSizePixels: 12,
        axisLabelFontFamily: 'Verdana, Arial',
        axisLabelPadding: 10,
        ticks: ticks
    },
    yaxis: {
        axisLabel: "Average Temperature",
        axisLabelUseCanvas: true,
        axisLabelFontSizePixels: 12,
        axisLabelFontFamily: 'Verdana, Arial',
        axisLabelPadding: 3,
        // tickFormatter: function (v, axis) {
        //     return v + "Â°C";
        // }
    },
    legend: {
        noColumns: 0,
        labelBoxBorderColor: "#000000",
        position: "nw"
    },
    grid: {
        hoverable: true,
        borderWidth: 2,
        backgroundColor: { colors: ["#ffffff", "#EDF5FF"] }
    }
};







$(document).ready(function () {
//     $.plot($("#placeholder"), [
//         {
//             data: d1,
//             bars: {
//                 show: true
//             }
//         }
//     ]);
$.plot($("#placeholder"), dataset, options);

});


</script>

<% a = Product.all 
	a.each do |p|
%>

<%= p.name %>
<% end %>	

<!-- 	<div id="header">
		<h2>Basic Usage</h2>
	</div>
 -->
	<!-- <div id="content"> -->

		<div class="demo-container">
			<div id="placeholder" class="demo-placeholder"></div>
		</div>


	<!-- </div> -->

